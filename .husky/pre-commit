#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"
echo 'ğŸš¦ Pre-commit checks ğŸš¦'

# Check vulnerabilities
echo 'ğŸ› Checking vulnerabilities ğŸ›'
npm run audit ||
(
    echo 'âŒ Vulnerabilities found âŒ'
    false;
)
echo 'âœ… No vulnerabilities found âœ…'

# Check Prettier standards
echo 'ğŸ” Checking Prettier standards ğŸ”'
npm run format ||
(
    echo 'âŒ Prettier standards are not met âŒ'
    false;
)
echo 'âœ… Prettier standards are met âœ…'

# Run unit tests
echo 'ğŸ§ª Running unit tests ğŸ§ª'
npm run client:test ||
(
    echo 'âŒ Unit tests failed âŒ'
    false;
)
echo 'âœ… Unit tests successful âœ…'

# Build the client
echo 'ğŸš§ Building the client ğŸš§'
npm run client:build ||
(
    echo 'âŒ Client build failed âŒ'
    false;
)
echo 'âœ… Client build successful âœ…'
